{% load static %}
<!doctype html>
<html>
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>SmartHealth - Verify OTP</title>
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
			rel="stylesheet"
		/>
		<script src="https://cdn.tailwindcss.com"></script>
		<link rel="stylesheet" href="{% static 'css/main.css' %}" />
	</head>
	<body
		class="min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 text-slate-900"
	>
		<!-- Minimal Navbar -->
		<nav class="sticky top-0 z-50 bg-white shadow-md">
			<div
				class="mx-auto flex max-w-6xl items-center justify-between px-5 py-4"
			>
				<div class="text-2xl font-extrabold text-slate-900">
					ğŸ’ª SmartHealth
				</div>
				<div class="flex items-center gap-10">
					<a
						href="/"
						class="text-sm font-medium text-slate-600 hover:text-indigo-600 transition"
						>Home</a
					>
					<a
						href="/accounts/login/"
						class="inline-flex items-center justify-center rounded-lg bg-gradient-to-r from-indigo-600 to-purple-600 px-4 py-2 text-white font-semibold shadow-lg transition duration-300 hover:shadow-xl hover:from-indigo-700 hover:to-purple-700 transform hover:scale-105"
					>
						Login
					</a>
				</div>
			</div>
		</nav>

		<!-- OTP Verification Card -->
		<div
			class="flex items-center justify-center px-4 sm:px-6 min-h-[calc(100vh-72px)]"
		>
			<div
				class="w-full max-w-md rounded-2xl bg-white/90 backdrop-blur-lg shadow-xl p-10"
			>
				<!-- Title -->
				<div class="text-center mb-8">
					<h1 class="text-3xl font-extrabold text-slate-900">
						Verify Email ğŸ”
					</h1>
					<p class="text-sm text-slate-500 mt-2">
						Enter the 4-digit code sent to {{ email }}
					</p>
				</div>

				<!-- Messages -->
				{% if messages %}
				<div class="mb-6 space-y-3">
					{% for message in messages %}
					<div
						class="flex items-start gap-3 rounded-2xl border px-5 py-4 shadow-sm {% if 'success' in message.tags %}border-green-200 bg-green-50 text-green-800{% elif 'error' in message.tags or 'danger' in message.tags %}border-red-200 bg-red-50 text-red-800{% elif 'warning' in message.tags %}border-amber-200 bg-amber-50 text-amber-800{% else %}border-indigo-200 bg-indigo-50 text-indigo-800{% endif %}"
					>
						<div
							class="flex h-8 w-8 items-center justify-center rounded-full {% if 'success' in message.tags %}bg-green-100{% elif 'error' in message.tags or 'danger' in message.tags %}bg-red-100{% elif 'warning' in message.tags %}bg-amber-100{% else %}bg-indigo-100{% endif %}"
						>
							{% if 'success' in message.tags %}
							<span class="text-lg">âœ…</span>
							{% elif 'error' in message.tags or 'danger' in message.tags %}
							<span class="text-lg">â›”</span>
							{% elif 'warning' in message.tags %}
							<span class="text-lg">âš ï¸</span>
							{% else %}
							<span class="text-lg">â„¹ï¸</span>
							{% endif %}
						</div>
						<div class="text-sm leading-relaxed">{{ message }}</div>
					</div>
					{% endfor %}
				</div>
				{% endif %}

				<!-- Form -->
				<form class="space-y-6" method="post">
					{% csrf_token %}

					<div>
						<label
							for="otp"
							class="block text-xs font-bold uppercase tracking-wider text-slate-700 mb-2"
							>OTP Code</label
						>
						<input
							id="otp"
							required
							type="text"
							inputmode="numeric"
							maxlength="4"
							placeholder="0000"
							name="otp"
							class="w-full px-4 py-3 text-3xl text-center font-semibold border-2 border-slate-300 rounded-lg text-slate-900 placeholder-slate-400 outline-none transition duration-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 tracking-widest"
						/>
						<p class="text-xs text-slate-500 mt-2 text-center">
							Enter the 4-digit code from your email
						</p>
					</div>

					<button
						type="submit"
						class="w-full py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-semibold rounded-lg shadow-md hover:shadow-lg hover:scale-[1.02] active:scale-[0.98] transition-transform duration-200"
					>
						Verify OTP
					</button>
				</form>

				<!-- Resend OTP -->
				<div class="mt-8 text-center">
					<p class="text-sm text-slate-600 mb-3">
						Didn't receive the code?
					</p>
					<a
						href="{% url 'register' %}"
						class="inline-flex items-center justify-center text-indigo-600 hover:text-indigo-700 font-medium transition"
					>
						â† Back to register
					</a>
				</div>

				<!-- Footer Info -->
				<div class="mt-6 pt-6 border-t border-slate-200">
					<p class="text-xs text-slate-500 text-center">
						ğŸ’¡ OTP is valid for 5 minutes. If expired, register again.
					</p>
				</div>
			</div>
		</div>

		<script src="{% static 'js/app.js' %}"></script>
		<script>
			// Auto-focus input and restrict to numeric
			const otpInput = document.getElementById('otp');
			otpInput.addEventListener('input', function(e) {
				this.value = this.value.replace(/[^0-9]/g, '');
				if (this.value.length === 4) {
					// Optional: auto-submit when 4 digits entered
					// this.closest('form').submit();
				}
			});
			otpInput.focus();
		</script>
	</body>
</html>
